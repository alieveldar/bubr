function IndexLoadMore(old, lim) { LoaderGif(1, "#LoadMore"); JsHttpRequest.query("/modules/page_mods/mobile.index-LoadMore-JSReq.php" ,{'old':old,'lim':lim}, function(result,errors){ if(result){ /*s*/ LoaderGif(0, "#LoadMore"); if (result["Code"]==0) { /* последние записи или нет записей*/ $("#IndexLentaLists").append(result["text"]); } if (result["Code"]==1) { /* есть много записей */ $("#IndexLentaLists").append(result["text"]); BackLoadMoreButton(result["old"], lim); } /*e*/ }}, true); } function LoaderGif(stat, elemid) { if (stat==1) { $(elemid).html("<img src='/template/index/loader.gif' />"); } else { $(elemid).html(""); }} function BackLoadMoreButton(old, lim) { $("#LoadMore").html("<a href='javascript:void(0);' onclick=\"IndexLoadMore('"+old+"','"+lim+"');\">Показать ещё</a>"); }